# =====================================================================
# INSTAT Survey Platform - Environment Configuration
# Copy this file to .env and update values for your environment
# =====================================================================

# =====================================================================
# DATABASE CONFIGURATION
# =====================================================================
DATABASE_URL=postgresql://postgres:your_secure_password@db:5432/instat_surveys
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_secure_password
POSTGRES_DB=instat_surveys

# Alternative database hosts for different environments
# DATABASE_URL=postgresql://postgres:password@localhost:5432/instat_surveys  # Local development
# DATABASE_URL=postgresql://postgres:password@192.168.1.100:5432/instat_surveys  # Remote server

# =====================================================================
# OAUTH2 & SECURITY CONFIGURATION
# =====================================================================
# CRITICAL: Change this secret key in production!
SECRET_KEY=muqObXpk89vWh_6YpNGYMv20iH8Lu7CLW5nh7FCi-o
ACCESS_TOKEN_EXPIRE_MINUTES=1440

# Additional security settings
BCRYPT_ROUNDS=12
SESSION_TIMEOUT=3600

# =====================================================================
# APPLICATION CONFIGURATION
# =====================================================================
ENVIRONMENT=production
DEBUG=false
API_V1_STR=/api/v1
APPLICATION_NAME=INSTAT Survey Platform
VERSION=1.0.0

# Server settings
HOST=0.0.0.0
PORT=8000
WORKERS=4

# =====================================================================
# CORS & ALLOWED HOSTS
# =====================================================================
ALLOWED_HOSTS=["localhost","127.0.0.1","your-domain.com"]
CORS_ORIGINS=["http://localhost:3000","https://your-domain.com","http://localhost:8080"]

# Allow credentials in CORS requests
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=["GET","POST","PUT","DELETE","OPTIONS","PATCH"]
CORS_ALLOW_HEADERS=["*"]

# =====================================================================
# FILE UPLOAD & STORAGE
# =====================================================================
MAX_FILE_SIZE=100MB
UPLOAD_PATH=./uploads
GENERATED_PATH=./generated
ALLOWED_FILE_EXTENSIONS=[".xlsx",".xls",".csv",".json"]

# File storage limits
MAX_FILES_PER_USER=1000
CLEANUP_OLD_FILES_DAYS=90

# =====================================================================
# REDIS CONFIGURATION
# =====================================================================
REDIS_URL=redis://redis:6379/0
REDIS_PASSWORD=
REDIS_DB=0

# Redis cache settings
CACHE_EXPIRE_SECONDS=3600
CACHE_PREFIX=instat_survey

# =====================================================================
# LOGGING CONFIGURATION
# =====================================================================
LOG_LEVEL=INFO
LOG_FILE=./logs/app.log
LOG_ROTATION_SIZE=10MB
LOG_BACKUP_COUNT=5

# Log formats
LOG_FORMAT_CONSOLE=%(asctime)s - %(name)s - %(levelname)s - %(message)s
LOG_FORMAT_FILE=%(asctime)s - %(name)s - %(levelname)s - %(filename)s:%(lineno)d - %(message)s

# =====================================================================
# EMAIL CONFIGURATION (Optional)
# =====================================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-email-password
SMTP_TLS=true
EMAIL_FROM=noreply@instat.gov.ml
EMAIL_FROM_NAME=INSTAT Survey Platform

# =====================================================================
# EXTERNAL SERVICES INTEGRATION
# =====================================================================
# Apache Superset integration
SUPERSET_URL=http://superset:8088
SUPERSET_USERNAME=admin
SUPERSET_PASSWORD=admin

# External API endpoints
MALI_GEODATA_API=https://api.geodata.gov.ml/v1
STATISTICS_API=https://api.instat.gov.ml/v1

# =====================================================================
# PERFORMANCE & OPTIMIZATION
# =====================================================================
# Database connection pooling
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30

# Request timeout settings
REQUEST_TIMEOUT=300
UPLOAD_TIMEOUT=600

# Pagination defaults
DEFAULT_PAGE_SIZE=20
MAX_PAGE_SIZE=1000

# =====================================================================
# DEVELOPMENT & TESTING
# =====================================================================
# Set to true for development mode
DEVELOPMENT_MODE=false

# Test database (only used in testing)
TEST_DATABASE_URL=postgresql://postgres:password@localhost:5432/instat_surveys_test

# Mock external services in development
MOCK_EXTERNAL_APIS=false

# =====================================================================
# BACKUP & MAINTENANCE
# =====================================================================
# Automatic backup settings
AUTO_BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_DIRECTORY=./backups

# Maintenance mode
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="System is under maintenance. Please try again later."

# =====================================================================
# MONITORING & HEALTH CHECKS
# =====================================================================
# Health check endpoints
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_DATABASE=true
HEALTH_CHECK_REDIS=true

# Metrics collection
METRICS_ENABLED=true
METRICS_ENDPOINT=/metrics

# =====================================================================
# FEATURE FLAGS
# =====================================================================
# Enable/disable platform features
FEATURE_EXCEL_PARSING=true
FEATURE_TEMPLATE_GENERATION=true
FEATURE_AUDIT_LOGGING=true
FEATURE_MALI_REFERENCE=true
FEATURE_OAUTH2_AUTH=true
FEATURE_FILE_UPLOAD=true

# Advanced features
FEATURE_AI_ASSISTANCE=false
FEATURE_ADVANCED_ANALYTICS=false
FEATURE_EXPORT_FORMATS=true

# =====================================================================
# INTERNATIONALIZATION
# =====================================================================
DEFAULT_LANGUAGE=fr
SUPPORTED_LANGUAGES=["fr","en"]
TIMEZONE=Africa/Bamako

# =====================================================================
# CUSTOM INSTAT SETTINGS
# =====================================================================
# INSTAT-specific configuration
INSTAT_DOMAIN=instat.gov.ml
INSTAT_CONTACT_EMAIL=contact@instat.gov.ml
INSTAT_SUPPORT_EMAIL=support@instat.gov.ml

# Survey defaults
DEFAULT_SURVEY_DOMAIN=sds
DEFAULT_SURVEY_CATEGORY=diagnostic
DEFAULT_FISCAL_YEAR=2024

# Mali-specific settings
MALI_REGIONS_COUNT=10
MALI_CERCLES_COUNT=65
DEFAULT_CURRENCY=FCFA
DEFAULT_REGION_CODE=BKO
